我的界面实现
===

## 接上节课 - 项目搭建

上节课主要讲得是项目的搭建，把项目的大体框架搭了出来，对比了一下这几个模块，这节课我打算实现『我的界面』，因为我觉得『我的界面』实现起来比较简单，如果一开始就实现比较复杂的界面，可能有些基础不好的人会接受不了，所以我决定从简单的界面实现，然后再实现复杂的界面，须循渐进嘛，这样一步一步地完成我们想要完成的项目。当然四个主界面的关系不是很大，你也可以先实现其他界面。

## 我的界面

![我的](resource/我的界面.png)

我的界面由`UITableView` 实现，分为上下两个部分，上边是头部，下边是 cell。总体来说比较简单，比较复杂的一点就是 cell 的数据是从后台获取的，不是直接写在代码里的。这样设计也有是好处的，数据每次获取的都是最新的，比如最近要搞什么活动，那么 `cell` 的数据就会更新，告知用户的最新的活动。

### 1. cell 的分析

#### 1.1 第一个 cell

第一个 cell 有三种种情况，分为无任何关注，有一个关注，有两个及以上关注的情况，如下图：

![我的-无关注](resource/我的-无关注.png)

![图-1](resource/%E6%88%91%E7%9A%84-%E7%AC%AC%E4%B8%80%E4%B8%AAcell-1.png)

![图-2](resource/%E6%88%91%E7%9A%84-%E7%AC%AC%E4%B8%80%E4%B8%AAcell-2.png)

其中图一是无任何关注，会隐藏『我的关注』 cell。
其中图二是当没有关注用户或者只关注了一个用户的情况，没有关注用户则右侧的用户头像和用户昵称则隐藏。
图三是当关注用户的数量在两个以上的情况。对于图二的情况，我的实现是使用 `UICollectionView` ，自定义 `UICollectionViewCell`，自定义`cell`时候还要区分关注的用户是否有新动态，有新动态则显示`cell`右上角的红点，或
者是否是认证用户，是认证用户则显示『v』字图标。

获取到数据之后根据返回的数据判断显示哪种情况，对于请求关注用户的接口，应在每次界面显示时候去请求一次，这样我的关注里的数据都是最新的数据，就会显示刚刚关注的用户。

#### 1.2 其他  cell

![我的-其他cell](resource/%E6%88%91%E7%9A%84-%E5%85%B6%E4%BB%96cell.png)

其他 `cell` 就比较简单了，根据返回的数据，显示到对应的 `label` 上就可以了。

cell 分析就这些，这个界面用到了两个接口，一个是获取除了『我的关注』以外的 cell 数据，另一个是获取『我的关注』用户数据，数据请求我使用的是第三方框架 [Alamofire](https://github.com/Alamofire/Alamofire)。

根据返回的数据，我的界面 `cell` 分为四组，其中第一组是『我的关注』，第二组是『消息通知』；第二组包括『头条通知』和『京东特供』；第三组包括『我要爆料』，『用户反馈』和『系统设置』。

### 2.头部的分析

![我的-头部](resource/我的-头部.png)


### 3.头部实现日间夜间功能

![夜间功能](resource/夜间功能.png)

点击夜间按钮，app 主题会变为黑色，实现方式用的是一个第三方框架 [SwiftTheme]([https://github.com/jiecao-fm/SwiftTheme](https://github.com/jiecao-fm/SwiftTheme))，一个不错的主题替换方案，使用起来比较简单，该框架的介绍请看它的 github 主页，介绍的很详细。
